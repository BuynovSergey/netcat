(function(e,k){var h=function(b,c){return typeof b===c};if(h(e.nc,"function"))return e.nc;"object"!==typeof JSON&&(JSON={});JSON.stringify=JSON.stringify||function(b){var c=typeof b;if("object"!==c||null===b)return"string"===c&&(b='"'+b+'"'),String(b);var d,p=[],n=b&&b.constructor===Array;for(d in b){var m=b[d];c=typeof m;"string"===c?m='"'+m+'"':"object"===c&&null!==m&&(m=JSON.stringify(m));p.push((n?"":'"'+d+'":')+String(m))}return(n?"[":"{")+String(p)+(n?"]":"}")};var g=!1,f={netcat_path:"undefined"===
typeof NETCAT_PATH?"/netcat/":NETCAT_PATH,admin_path:"undefined"===typeof ADMIN_PATH?"/netcat/admin/":ADMIN_PATH,custom_scroll:!0},l=!1,a=function(){return k.apply(null,arguments)};a.$=k;a.window=e;a.root=a;a.view={};a.process_list={};h(e.parent.nc,"function")&&(a.root=e.parent.nc.root);a.is=h;a.debug=function(b,c){a.is_bool(b)&&!a.is_undefined(b)?g=b:g&&console.log(b+":",c);return g};a.key_exists=function(b,c){return c?c.hasOwnProperty(b):!1};a.is_object=function(b){return h(b,"object")};a.is_undefined=
function(b){return h(b,"undefined")};a.is_bool=function(b){return h(b,"boolean")};a.is_string=function(b){return h(b,"string")};a.is_function=function(b){return h(b,"function")};a.is_empty=function(b){switch(!0){case !b:return!0;case b.length&&0<b.length:return!1;case 0===b.length:return!0}for(var c in b)if(b.hasOwnProperty(c))return!1;return!0};a.is_touch=function(){var b=navigator.userAgent.toLowerCase(),c=["iphone","ipad","ipod","android"],d;for(d in c)if(-1!==b.indexOf(c[d]))return c[d];return!1};
a.is_root=function(){return a.root===a};a.ext=function(b,c,d){d=d||"root";a.is_undefined(a[d][b])?(a[d][b]=c,a.key_exists("__init",c)&&a.is_function(c.__init)&&c.__init()):"root"!==d&&(a[d][b]=c);"root"===d&&a.set_global(b)};a.set_global=function(b,c){c&&(a.root[b]=c);a[b]=a.root[b];for(var d in a.view)a.view[d][b]=a.root[b]};a._view="";a.register_view=function(b){for(var c in a.root.process_list)a.root.process_list[c].view===b&&delete a.root.process_list[c];a.process_stop();l=b;a.ext(b,a,"view");
a.event.call(["nc","register_view"],b)};a.process_start=function(b,c){a.is_empty(a.root.process_list)&&a.event.call(["nc","loading","start"]);a.root.process_list[b]={view:l,obj:c};a.ui.loader_show(c);a.event.call(["nc","process","start"],b,c)};a.process_stop=function(b,c){var d;b&&a.key_exists(b,a.root.process_list)&&((d=a(a.root.process_list[b].obj))&&a.ui.loader_hide(d,c),a.event.call(["nc","process","stop"],b,d),delete a.root.process_list[b]);a.is_empty(a.root.process_list)&&(a.ui.loader_hide(null,
c),a.event.call(["nc","loading","stop"]))};a.config=function(b,c){if(a.is_undefined(b))return f;if(!a.is_undefined(c))f[b]=c;else if(a.is_object(b)){for(var d in b)f[d]=b[d];return f}return f[b]};a.load_dialog=function(b,c,d){return(new a.ui.modal_dialog({url:b,parameters:c||{admin_modal:1,isNaked:1},method:d})).open()};a.get_closest_editor_parent=function(b){return k(b).closest(".nc-infoblock-object, .tpl-block-full, .nc-infoblock")};a.save_inline_then_load_dialog=function(b,c){var d=k(b).data("ncDialogOpenStart");
a.get_closest_editor_parent(b).hasClass("nc--with-active-editor")&&(!d||5E3>Date.now()-d)?(d||k(b).data("ncDialogOpenStart",Date.now()),a.process_start("dialog_waiting_for_editor_release"),setTimeout(function(){a.save_inline_then_load_dialog(b,c)},10)):(k(b).removeData("ncDialogOpenStart"),a.process_stop("dialog_waiting_for_editor_release"),a.load_dialog(c||b.href))};a.load_script=function(b,c){return k.ajax({url:b,dataType:"script",cache:!0,async:!!c})};a.load_script_if=function(b,c,d){return b?
a.load_script(c,d):k.when()};a.load_class=function(b,c,d){return e[b]&&"function"===typeof e[b]&&/^\s*class\b/.test(e[b].toString())?k.when():a.load_script(c,d)};a.set_global("debug");a.set_global("view");a.set_global("config");e.nc=a})(window,jQuery);
(function(e){var k={},h=function(g,f){e.is_undefined(k[g])&&(k[g]=[]);k[g].push(f)};h.selector=[];h.call=function(g){h.selector=g.slice();var f,l,a=[],b="";for(f in g)b=(b?b+".":"")+g[f],a.unshift(b);b=[].slice.call(arguments);b[0]=h;for(f in a)if(k[a[f]])for(l in k[a[f]])k[a[f]][l].apply(null,b)};e.ext("event",h)})(nc);
(function(e){var k=!1,h=function(){};h.__init=function(){e.event(["nc.process.stop"],function(g,f){if("loadIframe()"===f)(g=e("#mainViewIframe"))&&g.attr("title",e("#mainViewHeader").text());else if("tree"===f.split(".")[0]&&e.view&&e.view.tree)return h.accessibility_link(e.view.tree("a"))})};h.loader_show=function(g){g&&e(g).addClass("nc--loading");k&&clearTimeout(k);e.root("#nc-navbar-loader").show()};h.loader_hide=function(g,f){f=f||300;g?setTimeout(function(){g.removeClass("nc--loading")},f):
k=setTimeout(function(){e.root("#nc-navbar-loader").hide()},f)};h.ext=function(g,f){e.root.ui[g]=f};h.custom_scroll=function(g){return e.config("custom_scroll")&&g.length?g.jScrollPane({autoReinitialise:!0}):!1};h.accessibility_link=function(g){g.each(function(){var f=e(this),l=f.attr("title"),a=this.innerText;a=l?l:a;if(!l){if(!a)return e.debug("badlink",f);l||f.attr("title",a)}})};e(function(){h.accessibility_link(e("a"));e(document).on("click","div.nc-panel-toggle",function(){e(this).parents("div.nc-panel").toggleClass("nc--open nc--close")})});
e.ext("ui",h)})(nc);
